# # 自定义使用示例
# from src.retriever import Retriever

# # 初始化检索器
# retriever = Retriever()

# # 示例文本
# text = """
# 在这个春日的清晨，阳光洒落在花园，蝴蝶在花间翩翩起舞，
# 微风拂过脸庞，带来花香和泥土的芬芳，整个世界都焕发着生机。
# 这样的美景让人心旷神怡，使人不禁想起生活的美好。
# """

# # 获取推荐
# recommendations = retriever.recommend_for_text(text)
# formatted_results = retriever.format_recommendations(recommendations)

# # 打印结果
# for result in formatted_results:
#     print(f"原文片段: {result['original_text']}")
#     print("推荐项:")
#     for rec in result["recommendations"]:
#         if rec["type"] == "诗词":
#             print(f"  - {rec['type']}: {rec['title']} - {rec['author']}")
#             print(f"    {rec['content']}")
#         else:  # 成语
#             print(f"  - {rec['type']}: {rec['idiom']} - {rec['explanation']}")
#         print(f"    相似度: {rec['score']}")
#     print("-" * 50)
from rag_recommand import query_rag_system 

def get_recommendations(text, top_k=5):
    """
    获取诗词成语推荐结果的包装函数
    """
    results = query_rag_system(text, top_k=top_k)
    return results

# 使用示例
if __name__ == "__main__":
    input_text = "日前，一位外国博主在游览长城时拍摄短视频中的一句“city不city”(可以理解为洋不洋气)，让这句中英文混搭词成为网络热词。随着“144小时过境免签”政策的持续深入落地，越来越多外国游客开始在短视频、社交平台上分享他们来华旅游的点点滴滴，“ChinaTravel(中国旅行)”相关话题拍一个火一个。当代中国社会尤其是中国生活方式的方方面面，都被这些博主们以更为感 性、亲切、自然的方式直观分享。\n的确，从东北锅包肉到潮汕生腌，从覆盖全国的高铁网络到整洁有序的地铁出行，从扫码支付到随处可见的送餐机器人，当代中国生活方式的太多细节大大超出了一般外国游客过去的对华认知。因此，当大量外国游客能够通过“144小时过境免签”便捷地来到中国，真切地感受到丰富多彩直观立体的当代中国，见证完全不同于西方媒体通过有色滤镜建构的中国形象之时，掏出手机快速记录所见所闻就 成了他们发自内心的自主选择。而一旦突破了西方舆论长期以来精心营造的“信息茧房”，对于广大外国游客而言，之前有关中国之旅的担心忧虑也就瞬间消散，取而代之的是对当代中国社会方方面面的切身感受和客观讲述。\n这绝非偶然，或者说这个现象本身就“非常中国”。即便是放到世界范围内来看，普通人可以通过短视频的方式分享包括旅游在内的日常生活，也是本世纪第二个十年以来才出现的新现象，这背后是移动互联网影响下的全球历史进程。而在这一历史进程中，中国社会较早完成了全国范围内的电信基础设施搭建，各个领域的互联网企业如雨后春笋般竞相涌现，为我国广大人民群众的日常生活带来了极大的便利。近年来，中国的互联网企业相继“出海”，在这一过程中也将凝结着移动互联网中国经验的各类商业模式推向全世界，对于全球移动互联网的历史进程同样做出了巨大贡献。\n相较于好莱坞、“韩流”等文化模式，中国社会在实现移动互联网的基础设施搭建之后，广泛而迅速地完成了面向广大人民群众的信息普惠，人民群众在充分享受中国社会改革开放红利的同时，也为中国各领域的互联网企业赋予了独具中国经验的竞争力。所以，中国的互联网企业一经走向世界，就迅速为世界各国人民提供了好莱坞、“韩流”等文化模式之外的新产品、新服务，拓展了新的文化经验、文化空间。\n这种全新的文化经验，强调尊重当地风土人情，致力于本地化运营，能够最大化地释放广大互联网用户的热情和创造性。如今，中国网络文学、网剧、网络游戏这样的文化“新三样”开始在世界范围受到热捧，不断刮起更炫“中国风”；微短剧、剧本娱乐等文化新业态不断推陈出新，将更多当代中国经验传递给全世界，正是基于这种文化经验平等包容的精神内核。\n可见，尊重多元文化，能够容纳不同价值观的中国生活方式，才是越来越多外国游客发自内心、自觉自愿地分享与西方滤镜下明显不同的中国形象的根本原因。根据世界经济论坛公布的2024年旅游业发展指数报告，中国已经跃升至第8位，并且呈现出了明显的持续上升趋势。国家移民管理局公布的数据显示，一季度，外国人来华数量较2023年同期增长超3倍，以旅游观光最多，占到三成以上。当代世界呼唤一个更为平等、有序、多元、多样的国际新秩序，打破形形色色的意识形态壁垒。以当代中国生活方式为代表的多样化文化经验，将促进世界各国人民的友好交往，推动国际社会进一步多元发展。"
    recommendations = get_recommendations(input_text)
    print(recommendations)